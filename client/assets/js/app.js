(function(angular, FastClick) {
  'use strict';

  angular.module('application', [
    // Angular libraries
    'ui.router',
    'ngAnimate',
    'ngSanitize',
    // Foundation UI components
    'foundation',
    // Routing with front matter
    'foundation.dynamicRouting',
    // Transitioning between views
    'foundation.dynamicRouting.animations',
    // angular-translate
    'pascalprecht.translate',
    // Generated by gulp
    'app.config',
    'app.translations',
    // Own modules
    'controllers',
    'services'
  ])
    .config(config)
    .run(run);

  config.$inject = ['$urlRouterProvider', '$locationProvider', '$translateProvider'];

  function config($urlProvider, $locationProvider, $translateProvider) {
    // Default to the index view if the URL loaded is not found
    $urlProvider.otherwise('/car/list');

    // Use this to enable HTML5 mode
    $locationProvider.html5Mode({
      enabled: false,
      requireBase: false
    });

    // Use this to set the prefix for hash-bangs
    // Example: example.com/#!/page
    $locationProvider.hashPrefix('!');

    $translateProvider
      .registerAvailableLanguageKeys([/* 'en', */'fr'], {
        // 'en_*': 'en',
        'fr_*': 'fr'
      })
      .fallbackLanguage('fr')
      .determinePreferredLanguage()
      .useSanitizeValueStrategy('sanitize');
  }

  function run() {
    // Enable FastClick to remove the 300ms click delay on touch devices
    FastClick.attach(document.body);
  }
})(angular, FastClick);
